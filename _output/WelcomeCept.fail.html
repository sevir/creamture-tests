<script data-php_error="magic JS, just ignore this!">"use strict";(function(window){if(window.XMLHttpRequest){var wrapMethod=function(XMLHttpRequest,old,prop){if(old.prototype[prop]){var behaviours=(arguments.length>3)?Array.prototype.slice.call(arguments,3):null;XMLHttpRequest.prototype[prop]=function(){if(behaviours!==null){for(var i=0;i<behaviours.length;i++){behaviours[i].call(this,arguments,prop);}}
return this.__.inner[prop].apply(this.__.inner,arguments);};}}
var postMethod=function(XMLHttpRequest,prop){if(XMLHttpRequest.prototype[prop]){var behaviours=Array.prototype.slice.call(arguments,2);var previous=XMLHttpRequest.prototype[prop];XMLHttpRequest.prototype[prop]=function(){var r=previous.apply(this,arguments);for(var i=0;i<behaviours.length;i++){behaviours[i].call(this,arguments,prop);}
return r;};}}
var copyProperties=function(src,dest,props){for(var i=0;i<props.length;i++){try{var prop=props[i];dest[prop]=src[prop];}catch(ex){}}};var copyResponseProperties=function(src,dest){copyProperties(src,dest,['response','responseText','responseXML']);}
var copyRequestProperties=function(src,dest,includeReadOnly,skipResponse){copyProperties(src,dest,['readyState','timeout','upload','withCredentials','responseType','mozBackgroundRequest','mozArrayBuffer','multipart']);if(includeReadOnly){copyProperties(src,dest,['status','statusText','channel']);if(!skipResponse){copyResponseProperties(src,dest);}}
return dest;}
var runFail=function(ev){var self=this;var xmlHttpRequest=this.__.inner;var iframe=document.createElement('iframe');iframe.setAttribute('width','100%');iframe.setAttribute('height','100%');iframe.setAttribute('src','about:blank');iframe.style.transition=iframe.style.OTransition=iframe.style.MsTransition=iframe.style.MozTransition=iframe.style.WebkitTransition='opacity 200ms linear';iframe.style.background='transparent';iframe.style.opacity=0;iframe.style.zIndex=100001;iframe.style.top=0;iframe.style.right=0;iframe.style.left=0;iframe.style.bottom=0;iframe.style.position='fixed';var response=xmlHttpRequest.responseText;iframe.onload=function(){var iDoc=iframe.contentWindow||iframe.contentDocument;if(iDoc.document){iDoc=iDoc.document;}
var iBody=iDoc.getElementsByTagName("body")[0];iBody.innerHTML=response;var iHead=iDoc.getElementsByTagName("head")[0];var scripts=iDoc.getElementsByTagName('script');for(var i=0;i<scripts.length;i++){var script=scripts[i];var parent=script.parentNode;if(parent){parent.removeChild(script);var newScript=iDoc.createElement('script');newScript.innerHTML=script.innerHTML;iHead.appendChild(newScript);}}
var closed=false;var closeIFrame=function(){if(!closed){closed=true;iframe.style.opacity=0;setTimeout(function(){iframe.parentNode.removeChild(iframe);},220);}}
var retry=iDoc.getElementById('ajax-retry');if(retry){var retryFun=function(){var methodCalls=self.__.methodCalls;initializeXMLHttpRequest.call(self);for(var i=0;i<methodCalls.length;i++){var method=methodCalls[i];self[method.method].apply(self,method.args);}
closeIFrame();return false;};retry.onclick=retryFun;iframe.__php_error_retry=retryFun;iDoc.getElementById('ajax-close').onclick=function(){copyRequestProperties(self.__.inner,self,true);self.response='';self.responseText='';self.responseXML=null;if(self.onreadystatechange){self.onreadystatechange(ev);}
closeIFrame();return false;};var html=iDoc.getElementsByTagName('html')[0];html.setAttribute('class','ajax');setTimeout(function(){iframe.style.opacity=1;},1);}}
setTimeout(function(){var body=document.getElementsByTagName('body')[0];body.appendChild(iframe);},1);}
var old=window.XMLHttpRequest;var XMLHttpRequest=function(){initializeXMLHttpRequest.call(this);}
var initializeXMLHttpRequest=function(){var self=this,inner=new old();var errorOnce=true,isAjaxError=false;var stateResults=[];inner.onreadystatechange=function(ev){copyRequestProperties(inner,self,true,true);var state=inner.readyState;if(!isAjaxError&&state>=2){var header=inner.getResponseHeader('PHP_ERROR_MAGIC_HEADER');if(header!==null&&header!==''){self.__.isAjaxError=true;isAjaxError=true;}}
if(!isAjaxError&&state>=2){copyResponseProperties(inner,self);}
if(!isAjaxError&&self.onreadystatechange){if(state<4){stateResults.push(copyRequestProperties(self,{},true));}else{if(stateResults!==null){var currentState=copyRequestProperties(self,{},true);for(var i=0;i<stateResults.length;i++){var store=stateResults[i];copyRequestProperties(store,self,true);if(self.onreadystatechange){self.onreadystatechange(ev);}}
copyRequestProperties(currentState,self,true);stateResults=null;}
if(self.onreadystatechange){self.onreadystatechange(ev);}}}
if(isAjaxError&&state===4&&errorOnce){errorOnce=false;if(window.console&&window.console.log){window.console.log('Ajax Error Calling: '+self.__.url);}
runFail.call(self,ev);}};copyRequestProperties(inner,this,true);this.__={methodCalls:[],inner:inner,isAjaxError:false,isSynchronous:false,url:''};}
var copyIn=function(){copyRequestProperties(this,this.__.inner);}
var copyOut=function(){copyRequestProperties(this.__.inner,this,true,this.__.isSynchronous&&this.__.isAjaxError);}
var addHeader=function(){this.__.inner.setRequestHeader('HTTP_X_REQUESTED_WITH','XMLHttpRequest');}
var isSynchronous=function(args){this.__.isSynchronous=(args[2]===false);}
var saveRequest=function(args,method){this.__.methodCalls.push({method:method,args:args});}
var grabOpen=function(args,method){this.__.url=args[1];}
wrapMethod(XMLHttpRequest,old,'open',saveRequest,copyIn,isSynchronous,grabOpen);wrapMethod(XMLHttpRequest,old,'abort',saveRequest,copyIn);wrapMethod(XMLHttpRequest,old,'send',saveRequest,copyIn,addHeader);wrapMethod(XMLHttpRequest,old,'sendAsBinary',saveRequest,copyIn,addHeader);postMethod(XMLHttpRequest,'send',copyOut);postMethod(XMLHttpRequest,'sendAsBinary',copyOut);wrapMethod(XMLHttpRequest,old,'getAllResponseHeaders',saveRequest);wrapMethod(XMLHttpRequest,old,'getResponseHeader',saveRequest);wrapMethod(XMLHttpRequest,old,'setRequestHeader',saveRequest);wrapMethod(XMLHttpRequest,old,'overrideMimeType',saveRequest);window.XMLHttpRequest=XMLHttpRequest;}})(window);</script>string(14) "jose@sevir.org"
